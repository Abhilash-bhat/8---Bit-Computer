# Program Counter 

## Table of Contents
1.  [Module Overview](#module-overview)
2.  [Components](#components)
3.  [Schematics](#schematics)
4.  [Working](#working)
-   [Overall Working of Program Counter](#overall-working-of-program-counter)
-   [Role of IC 74LS161](#role-of-ic-74ls161)
-   [Role of IC 74LS245](#role-of-ic-74ls245)

5.  [Image](#image)
6.  [References](#references)

## Module Overview
The 8 bit computer uses the program counter (PC) to keep track of the current instruction by counting in binary and it has 3 control signals.

## Components 
 * **IC 74LS161** : Synchronous 4-bit binary counter
 * **IC 74LS245** : 3-State Octal Bus Transceiver
 * **LED** : 4 nos
 


## Schematics
<img width="972" alt="pc" src="https://github.com/Abhilash-bhat/EightBitComputer/assets/132778360/49780dbe-9272-4067-98b4-9b96225e8b4b">

**Fig.** ***Program Counter Schematic*** *(designed on KiCAD, Credits: Ben Eater)*

 ## Working

### Overall Working of Program counter
1. A program is a sequence of instructions that the computer executes. When we run a program, it is stored in the RAM.
2. The program usually begins at the address 0, which is the first location in the RAM. The computer fetches and executes the instruction at address 0, then moves on to the next address in order, such as address 1, 2, 3, and so on.
3. The computer needs a way to keep track of which address it is currently executing, and which address it should execute next. This is done by using a program counter, which is a circuit that holds the current address and increments it by one after each instruction cycle.
4. The program counter uses a 4-bit binary counter(IC 74LS161) to count from 0000 to 1111 in binary. This is because the memory address register has 4 bits of address space. The program counter increments its value by one in each clock cycle.
5. The program counter also acts like a register, which stores the current count value.
6. The program counter has three control signals, which are:
   * Program counter out (CO): This signal allows the program counter to output its value to the bus, where it can be read by other parts of the computer, such as the memory address register.
   * Jump program counter in (J) (in progress): This signal allows the program counter to input a new value from the bus, instead of incrementing by one. This is useful when we want to execute instructions that are not in sequential order, such as loops or jumps.
   * Count enable (CE): This signal determines whether the program counter should increment by one or not. We donâ€™t want the program counter to increment for every clock pulse, because one instruction cycle takes multiple clock cycles. So, we only enable the count when we want to move to the next instruction.
7. The control signals are generated by a control logic circuit, which monitors the instruction opcode and other signals from the computer.

### Role of IC 74LS161

The IC 74LS161 is a synchronous 4-bit binary counter that can count up or down from 0 to 15. It has the following features and functions:

* It has an 8-bit input/output bus that can be connected to other counters or devices.
* It has a clock input that triggers the counting operation on the rising edge of the clock pulse.
* It has two count enable inputs (CEP and CET) that control whether the counter increments or decrements by one or remains unchanged. Both inputs must be high for the counter to change.
* It has a load input (LD) that allows the counter to be preset to any value from the bus when it is low. The load operation overrides the count enable inputs and the clock input.
* It has a clear input (CLR) that resets the counter to zero when it is low. The clear operation overrides all other inputs and is asynchronous, meaning it does not depend on the clock input.
* It has a carry output (RCO) that indicates when the counter reaches its maximum or minimum value. The carry output is high when the counter is at 15 and counting up, or at 0 and counting down. The carry output can be used to cascade multiple counters together for higher bit counts.
* It has an internal carry look-ahead circuit that speeds up the counting operation by anticipating the carry output before it occurs.

### Role of IC 74LS245

* The 74LS245 is an octal bus transceiver, which means it can transmit data in both directions on an 8-bit bus. 
It's used in the A register (and other registers) to control whether the register is outputting its data onto the bus or not.

* The 74LS245 has a direction pin (DIR) and an output enable pin (OE). 
When the OE pin is low, the transceiver is enabled, and the direction of data flow is determined by the DIR pin. 
If DIR is high, data flows from the A side (pins A1-A8) to the B side (pins B1-B8).  
If DIR is low, data flows from the B side to the A side.

* In the context of the A register, the 74LS245 is used to control when the register's data is put onto the bus. 
When the register's output control signal is activated (low), the 74LS245's OE pin is set low, 
enabling the transceiver and allowing the data stored in the register to be put onto the bus. 
When the output control signal is not activated (high), the OE pin is set high, 
disabling the transceiver and  isolating the register's data from the bus. 
This ability to control when a register outputs its data onto the bus is crucial in a computer system, 
as it allows different components to use the bus at different times without interfering with each other.


## Image

![program counter](https://github.com/Abhilash-bhat/EightBitComputer/assets/132778360/442352ff-080c-4865-b100-68a3bba9a429)

## References 


* [Ben Eater's Channel](https://www.youtube.com/playlist?list=PLowKtXNTBypGqImE405J2565dvjafglHU)
* [Ben Eater's Website ](https://eater.net/8bit/alu)

